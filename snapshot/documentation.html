<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M19 from src/site/markdown/documentation.md at 2026-01-26
 | Rendered using Apache Maven Fluido Skin 2.0.0-M11
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M19" />
    <title>Copilot SDK for Java - Documentation – GitHub Copilot Community SDK :: Java</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M11.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M11.min.js"></script>
    <style>.github-fork-ribbon:before { background-color: gray; }</style>
  </head>
  <body class="topBarEnabled">
    <a class="github-fork-ribbon right-top" href="https://github.com/copilot-community-sdk/copilot-sdk-java" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <header id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
<a class="brand" href="index.html">GitHub Copilot SDK for Java
</a>
            <ul class="nav">
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html">Introduction</a></li>
            <li><a>Documentation</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="documentation.html#API_Reference">API Reference</a>
              <ul class="dropdown-menu">
                  <li><a href="documentation.html#CopilotClient">CopilotClient</a></li>
                  <li><a href="documentation.html#CopilotSession">CopilotSession</a></li>
              </ul>
            </li>
            <li><a href="documentation.html#Event_Types">Event Types</a></li>
            <li><a href="documentation.html#Streaming">Streaming</a></li>
            <li><a href="documentation.html#Listing_Models">Listing Models</a></li>
            <li class="dropdown-submenu">
<a href="documentation.html#Advanced_Usage">Advanced Usage</a>
              <ul class="dropdown-menu">
                  <li><a href="documentation.html#Manual_Server_Control">Manual Server Control</a></li>
                  <li><a href="documentation.html#Tools">Tools</a></li>
                  <li><a href="documentation.html#System_Message_Customization">System Message Customization</a></li>
                  <li><a href="documentation.html#Multiple_Sessions">Multiple Sessions</a></li>
                  <li><a href="documentation.html#File_Attachments">File Attachments</a></li>
                  <li><a href="documentation.html#Bring_Your_Own_Key_.28BYOK.29">Bring Your Own Key (BYOK)</a></li>
                  <li><a href="documentation.html#Permission_Handling">Permission Handling</a></li>
                  <li><a href="documentation.html#Infinite_Sessions">Infinite Sessions</a></li>
              </ul>
            </li>
            <li><a href="documentation.html#Error_Handling">Error Handling</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="dependencies.html">Dependencies</a></li>
                  <li><a href="dependency-info.html">Maven Coordinates</a></li>
                  <li><a href="index.html">About</a></li>
                  <li><a href="licenses.html">Licenses</a></li>
                  <li><a href="plugin-management.html">Plugin Management</a></li>
                  <li><a href="plugins.html">Plugins</a></li>
                  <li><a href="scm.html">Source Code Management</a></li>
                  <li><a href="summary.html">Summary</a></li>
                  <li><a href="team.html">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="apidocs/index.html">Javadoc</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
        </div>
      </div>
    </header>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2026-01-26<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0.3-SNAPSHOT<span class="divider">|</span></li>
      <li><a href="index.html">Home</a><span class="divider">/</span></li>
    <li class="active">Copilot SDK for Java - Documentation</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html">Introduction</a></li>
    <li class="active"><a>Documentation</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="documentation.html#API_Reference"><span class="icon-chevron-down"></span>API Reference</a>
     <ul class="nav nav-list">
      <li><a href="documentation.html#CopilotClient">CopilotClient</a></li>
      <li><a href="documentation.html#CopilotSession">CopilotSession</a></li>
     </ul></li>
    <li><a href="documentation.html#Event_Types">Event Types</a></li>
    <li><a href="documentation.html#Streaming">Streaming</a></li>
    <li><a href="documentation.html#Listing_Models">Listing Models</a></li>
    <li><a href="documentation.html#Advanced_Usage"><span class="icon-chevron-down"></span>Advanced Usage</a>
     <ul class="nav nav-list">
      <li><a href="documentation.html#Manual_Server_Control">Manual Server Control</a></li>
      <li><a href="documentation.html#Tools">Tools</a></li>
      <li><a href="documentation.html#System_Message_Customization">System Message Customization</a></li>
      <li><a href="documentation.html#Multiple_Sessions">Multiple Sessions</a></li>
      <li><a href="documentation.html#File_Attachments">File Attachments</a></li>
      <li><a href="documentation.html#Bring_Your_Own_Key_.28BYOK.29">Bring Your Own Key (BYOK)</a></li>
      <li><a href="documentation.html#Permission_Handling">Permission Handling</a></li>
      <li><a href="documentation.html#Infinite_Sessions">Infinite Sessions</a></li>
     </ul></li>
    <li><a href="documentation.html#Error_Handling">Error Handling</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Copilot_SDK_for_Java_-_Documentation"></a>
<h1>Copilot SDK for Java - Documentation</h1>
<blockquote>

<p>&#x26a0;&#xfe0f; <strong>Disclaimer:</strong> This is an <strong>unofficial, community-driven SDK</strong> and is <strong>not supported or endorsed by GitHub</strong>. Use at your own risk.</p>
</blockquote>
<p>This document provides detailed API reference and usage examples for the Copilot SDK for Java.</p><section><a id="Table_of_Contents"></a>
<h2>Table of Contents</h2>
<ul>

<li><a href="#API_Reference">API Reference</a>
<ul>

<li><a href="#CopilotClient">CopilotClient</a></li>
<li><a href="#CopilotSession">CopilotSession</a></li>
</ul></li>
<li><a href="#Event_Types">Event Types</a></li>
<li><a href="#Streaming">Streaming</a></li>
<li><a href="#Listing_Models">Listing Models</a></li>
<li><a href="#Advanced_Usage">Advanced Usage</a>
<ul>

<li><a href="#Manual_Server_Control">Manual Server Control</a></li>
<li><a href="#Tools">Tools</a></li>
<li><a href="#System_Message_Customization">System Message Customization</a></li>
<li><a href="#Multiple_Sessions">Multiple Sessions</a></li>
<li><a href="#File_Attachments">File Attachments</a></li>
<li><a href="#Bring_Your_Own_Key_.28BYOK.29">Bring Your Own Key (BYOK)</a></li>
<li><a href="#Permission_Handling">Permission Handling</a></li>
<li><a href="#Infinite_Sessions">Infinite Sessions</a></li>
<li><a href="#MCP_Servers">MCP Servers</a></li>
</ul></li>
<li><a href="#Error_Handling">Error Handling</a></li>
</ul></section><section><a id="API_Reference"></a>
<h2>API Reference</h2><section><a id="CopilotClient"></a>
<h3>CopilotClient</h3><section><a id="Constructor"></a>
<h4>Constructor</h4>

<pre class="prettyprint"><code class="language-java">new CopilotClient()
new CopilotClient(CopilotClientOptions options)
</code></pre>
<p><strong>Options:</strong></p>
<ul>

<li><code>cliPath</code> - Path to CLI executable (default: &#x201c;copilot&#x201d; from PATH)</li>
<li><code>cliArgs</code> - Extra arguments prepended before SDK-managed flags</li>
<li><code>cliUrl</code> - URL of existing CLI server to connect to (e.g., <code>&quot;localhost:8080&quot;</code>). When provided, the client will not spawn a CLI process.</li>
<li><code>port</code> - Server port (default: 0 for random)</li>
<li><code>useStdio</code> - Use stdio transport instead of TCP (default: true)</li>
<li><code>logLevel</code> - Log level (default: &#x201c;info&#x201d;)</li>
<li><code>autoStart</code> - Auto-start server (default: true)</li>
<li><code>autoRestart</code> - Auto-restart on crash (default: true)</li>
<li><code>cwd</code> - Working directory for the CLI process</li>
<li><code>environment</code> - Environment variables to pass to the CLI process</li>
</ul></section><section><a id="Methods"></a>
<h4>Methods</h4><section><a id="start.28.29.3A_CompletableFuture.3CVoid.3E"></a>
<h5><code>start(): CompletableFuture&lt;Void&gt;</code></h5>
<p>Start the CLI server and establish connection.</p></section><section><a id="stop.28.29.3A_CompletableFuture.3CVoid.3E"></a>
<h5><code>stop(): CompletableFuture&lt;Void&gt;</code></h5>
<p>Stop the server and close all sessions.</p></section><section><a id="forceStop.28.29.3A_CompletableFuture.3CVoid.3E"></a>
<h5><code>forceStop(): CompletableFuture&lt;Void&gt;</code></h5>
<p>Force stop the CLI server without graceful cleanup.</p></section><section><a id="createSession.28SessionConfig_config.29.3A_CompletableFuture.3CCopilotSession.3E"></a>
<h5><code>createSession(SessionConfig config): CompletableFuture&lt;CopilotSession&gt;</code></h5>
<p>Create a new conversation session.</p>
<p><strong>Config:</strong></p>
<ul>

<li><code>sessionId</code> - Custom session ID</li>
<li><code>model</code> - Model to use (&#x201c;gpt-5&#x201d;, &#x201c;claude-sonnet-4.5&#x201d;, etc.)</li>
<li><code>tools</code> - Custom tools exposed to the CLI</li>
<li><code>systemMessage</code> - System message customization</li>
<li><code>availableTools</code> - List of tool names to allow</li>
<li><code>excludedTools</code> - List of tool names to disable</li>
<li><code>provider</code> - Custom API provider configuration (BYOK)</li>
<li><code>streaming</code> - Enable streaming of response chunks (default: false)</li>
<li><code>mcpServers</code> - MCP server configurations</li>
<li><code>customAgents</code> - Custom agent configurations</li>
<li><code>onPermissionRequest</code> - Handler for permission requests</li>
</ul></section><section><a id="resumeSession.28String_sessionId.2C_ResumeSessionConfig_config.29.3A_CompletableFuture.3CCopilotSession.3E"></a>
<h5><code>resumeSession(String sessionId, ResumeSessionConfig config): CompletableFuture&lt;CopilotSession&gt;</code></h5>
<p>Resume an existing session.</p></section><section><a id="ping.28String_message.29.3A_CompletableFuture.3CPingResponse.3E"></a>
<h5><code>ping(String message): CompletableFuture&lt;PingResponse&gt;</code></h5>
<p>Ping the server to check connectivity.</p></section><section><a id="getStatus.28.29.3A_CompletableFuture.3CGetStatusResponse.3E"></a>
<h5><code>getStatus(): CompletableFuture&lt;GetStatusResponse&gt;</code></h5>
<p>Get CLI status including version and protocol information.</p></section><section><a id="getAuthStatus.28.29.3A_CompletableFuture.3CGetAuthStatusResponse.3E"></a>
<h5><code>getAuthStatus(): CompletableFuture&lt;GetAuthStatusResponse&gt;</code></h5>
<p>Get current authentication status.</p></section><section><a id="listModels.28.29.3A_CompletableFuture.3CList.3CModelInfo.3E.3E"></a>
<h5><code>listModels(): CompletableFuture&lt;List&lt;ModelInfo&gt;&gt;</code></h5>
<p>List available models with their metadata (id, name, capabilities, billing info).</p></section><section><a id="getState.28.29.3A_ConnectionState"></a>
<h5><code>getState(): ConnectionState</code></h5>
<p>Get current connection state. Returns one of: <code>DISCONNECTED</code>, <code>CONNECTING</code>, <code>CONNECTED</code>, <code>ERROR</code>.</p></section><section><a id="listSessions.28.29.3A_CompletableFuture.3CList.3CSessionMetadata.3E.3E"></a>
<h5><code>listSessions(): CompletableFuture&lt;List&lt;SessionMetadata&gt;&gt;</code></h5>
<p>List all available sessions.</p></section><section><a id="deleteSession.28String_sessionId.29.3A_CompletableFuture.3CVoid.3E"></a>
<h5><code>deleteSession(String sessionId): CompletableFuture&lt;Void&gt;</code></h5>
<p>Delete a session and its data from disk.</p></section><section><a id="getLastSessionId.28.29.3A_CompletableFuture.3CString.3E"></a>
<h5><code>getLastSessionId(): CompletableFuture&lt;String&gt;</code></h5>
<p>Get the ID of the most recently used session.</p><hr /></section></section></section><section><a id="CopilotSession"></a>
<h3>CopilotSession</h3>
<p>Represents a single conversation session.</p><section><a id="Properties"></a>
<h4>Properties</h4>
<ul>

<li><code>getSessionId()</code> - The unique identifier for this session</li>
</ul></section><section><a id="Methods_1"></a>
<h4>Methods</h4><section><a id="send.28String_prompt.29.3A_CompletableFuture.3CString.3E"></a>
<h5><code>send(String prompt): CompletableFuture&lt;String&gt;</code></h5>
<p>Convenience method to send a simple text message. Equivalent to <code>send(new MessageOptions().setPrompt(prompt))</code>.</p></section><section><a id="send.28MessageOptions_options.29.3A_CompletableFuture.3CString.3E"></a>
<h5><code>send(MessageOptions options): CompletableFuture&lt;String&gt;</code></h5>
<p>Send a message to the session.</p>
<p><strong>Options:</strong></p>
<ul>

<li><code>prompt</code> - The message/prompt to send</li>
<li><code>attachments</code> - File attachments</li>
<li><code>mode</code> - Delivery mode (&#x201c;enqueue&#x201d; or &#x201c;immediate&#x201d;)</li>
</ul>
<p>Returns the message ID.</p></section><section><a id="sendAndWait.28String_prompt.29.3A_CompletableFuture.3CAssistantMessageEvent.3E"></a>
<h5><code>sendAndWait(String prompt): CompletableFuture&lt;AssistantMessageEvent&gt;</code></h5>
<p>Convenience method to send a simple text message and wait for the session to become idle. Equivalent to <code>sendAndWait(new MessageOptions().setPrompt(prompt))</code>.</p></section><section><a id="sendAndWait.28MessageOptions_options.29.3A_CompletableFuture.3CAssistantMessageEvent.3E"></a>
<h5><code>sendAndWait(MessageOptions options): CompletableFuture&lt;AssistantMessageEvent&gt;</code></h5>
<p>Send a message and wait for the session to become idle. Default timeout is 60 seconds.</p></section><section><a id="sendAndWait.28MessageOptions_options.2C_long_timeoutMs.29.3A_CompletableFuture.3CAssistantMessageEvent.3E"></a>
<h5><code>sendAndWait(MessageOptions options, long timeoutMs): CompletableFuture&lt;AssistantMessageEvent&gt;</code></h5>
<p>Send a message and wait for the session to become idle with custom timeout.</p></section><section><a id="on.28Consumer.3CAbstractSessionEvent.3E_handler.29.3A_Closeable"></a>
<h5><code>on(Consumer&lt;AbstractSessionEvent&gt; handler): Closeable</code></h5>
<p>Subscribe to session events. Returns a <code>Closeable</code> to unsubscribe.</p>

<pre class="prettyprint"><code class="language-java">var subscription = session.on(evt -&gt; {
    System.out.println(&quot;Event: &quot; + evt.getType());
});

// Later...
subscription.close();
</code></pre></section><section><a id="abort.28.29.3A_CompletableFuture.3CVoid.3E"></a>
<h5><code>abort(): CompletableFuture&lt;Void&gt;</code></h5>
<p>Abort the currently processing message in this session.</p></section><section><a id="getMessages.28.29.3A_CompletableFuture.3CList.3CAbstractSessionEvent.3E.3E"></a>
<h5><code>getMessages(): CompletableFuture&lt;List&lt;AbstractSessionEvent&gt;&gt;</code></h5>
<p>Get all events/messages from this session.</p></section><section><a id="close.28.29"></a>
<h5><code>close()</code></h5>
<p>Dispose the session and free resources.</p><hr /></section></section></section></section><section><a id="Event_Types"></a>
<h2>Event Types</h2>
<p>Sessions emit various events during processing. Each event type extends <code>AbstractSessionEvent</code>:</p>
<ul>

<li><code>UserMessageEvent</code> - User message added</li>
<li><code>AssistantMessageEvent</code> - Assistant response</li>
<li><code>AssistantMessageDeltaEvent</code> - Streaming response chunk</li>
<li><code>ToolExecutionStartEvent</code> - Tool execution started</li>
<li><code>ToolExecutionCompleteEvent</code> - Tool execution completed</li>
<li><code>SessionStartEvent</code> - Session started</li>
<li><code>SessionIdleEvent</code> - Session is idle</li>
<li><code>SessionErrorEvent</code> - Session error occurred</li>
<li><code>SessionResumeEvent</code> - Session was resumed</li>
<li>And more&#x2026;</li>
</ul>
<p>Use pattern matching (Java 21+) to handle specific event types:</p>

<pre class="prettyprint"><code class="language-java">session.on(evt -&gt; {
    if (evt instanceof AssistantMessageEvent msg) {
        System.out.println(msg.getData().getContent());
    } else if (evt instanceof SessionErrorEvent err) {
        System.out.println(&quot;Error: &quot; + err.getData().getMessage());
    }
});
</code></pre></section><section><a id="Streaming"></a>
<h2>Streaming</h2>
<p>Enable streaming to receive assistant response chunks as they're generated:</p>

<pre class="prettyprint"><code class="language-java">var session = client.createSession(
    new SessionConfig()
        .setModel(&quot;gpt-5&quot;)
        .setStreaming(true)
).get();

var done = new CompletableFuture&lt;Void&gt;();

session.on(evt -&gt; {
    if (evt instanceof AssistantMessageDeltaEvent delta) {
        // Streaming message chunk - print incrementally
        System.out.print(delta.getData().getDeltaContent());
    } else if (evt instanceof AssistantMessageEvent msg) {
        // Final message - complete content
        System.out.println(&quot;\n--- Final message ---&quot;);
        System.out.println(msg.getData().getContent());
    } else if (evt instanceof SessionIdleEvent) {
        done.complete(null);
    }
});

session.send(new MessageOptions().setPrompt(&quot;Tell me a short story&quot;)).get();
done.get();
</code></pre></section><section><a id="Listing_Models"></a>
<h2>Listing Models</h2>
<p>Query available models and their capabilities before creating a session:</p>

<pre class="prettyprint"><code class="language-java">try (var client = new CopilotClient()) {
    client.start().get();

    // List all available models
    List&lt;ModelInfo&gt; models = client.listModels().get();
    
    for (ModelInfo model : models) {
        System.out.println(&quot;Model: &quot; + model.getId());
        System.out.println(&quot;  Name: &quot; + model.getName());
        
        if (model.getCapabilities() != null) {
            System.out.println(&quot;  Max Output Tokens: &quot; + model.getCapabilities().getMaxOutputTokens());
        }
        
        if (model.getPolicy() != null) {
            System.out.println(&quot;  State: &quot; + model.getPolicy().getState());
        }
    }
    
    // Use a specific model from the list
    var session = client.createSession(
        new SessionConfig().setModel(models.get(0).getId())
    ).get();
}
</code></pre>
<p>Each <code>ModelInfo</code> contains:</p>
<ul>

<li><code>id</code> - Model identifier (e.g., &#x201c;claude-sonnet-4.5&#x201d;, &#x201c;gpt-4o&#x201d;)</li>
<li><code>name</code> - Human-readable display name</li>
<li><code>capabilities</code> - Model limits including max output tokens</li>
<li><code>policy</code> - Policy state information</li>
<li><code>billing</code> - Billing/usage information</li>
</ul></section><section><a id="Advanced_Usage"></a>
<h2>Advanced Usage</h2><section><a id="Manual_Server_Control"></a>
<h3>Manual Server Control</h3>

<pre class="prettyprint"><code class="language-java">var client = new CopilotClient(
    new CopilotClientOptions().setAutoStart(false)
);

// Start manually
client.start().get();

// Use client...

// Stop manually
client.stop().get();
</code></pre></section><section><a id="Tools"></a>
<h3>Tools</h3>
<p>You can let the CLI call back into your process when the model needs capabilities you own:</p>

<pre class="prettyprint"><code class="language-java">var lookupTool = ToolDefinition.create(
    &quot;lookup_issue&quot;,
    &quot;Fetch issue details from our tracker&quot;,
    Map.of(
        &quot;type&quot;, &quot;object&quot;,
        &quot;properties&quot;, Map.of(
            &quot;id&quot;, Map.of(&quot;type&quot;, &quot;string&quot;, &quot;description&quot;, &quot;Issue identifier&quot;)
        ),
        &quot;required&quot;, List.of(&quot;id&quot;)
    ),
    invocation -&gt; {
        String id = ((Map&lt;String, Object&gt;) invocation.getArguments()).get(&quot;id&quot;).toString();
        return CompletableFuture.completedFuture(fetchIssue(id));
    }
);

var session = client.createSession(
    new SessionConfig()
        .setModel(&quot;gpt-5&quot;)
        .setTools(List.of(lookupTool))
).get();
</code></pre></section><section><a id="System_Message_Customization"></a>
<h3>System Message Customization</h3>
<p>Control the system prompt using <code>SystemMessageConfig</code> in session config:</p>

<pre class="prettyprint"><code class="language-java">var session = client.createSession(
    new SessionConfig()
        .setModel(&quot;gpt-5&quot;)
        .setSystemMessage(new SystemMessageConfig()
            .setMode(SystemMessageMode.APPEND)
            .setContent(&quot;&quot;&quot;
                &lt;workflow_rules&gt;
                - Always check for security vulnerabilities
                - Suggest performance improvements when applicable
                &lt;/workflow_rules&gt;
            &quot;&quot;&quot;))
).get();
</code></pre>
<p>For full control (removes all guardrails), use <code>REPLACE</code> mode:</p>

<pre class="prettyprint"><code class="language-java">var session = client.createSession(
    new SessionConfig()
        .setModel(&quot;gpt-5&quot;)
        .setSystemMessage(new SystemMessageConfig()
            .setMode(SystemMessageMode.REPLACE)
            .setContent(&quot;You are a helpful assistant.&quot;))
).get();
</code></pre></section><section><a id="Multiple_Sessions"></a>
<h3>Multiple Sessions</h3>

<pre class="prettyprint"><code class="language-java">var session1 = client.createSession(
    new SessionConfig().setModel(&quot;gpt-5&quot;)
).get();

var session2 = client.createSession(
    new SessionConfig().setModel(&quot;claude-sonnet-4.5&quot;)
).get();

// Both sessions are independent
session1.send(new MessageOptions().setPrompt(&quot;Hello from session 1&quot;)).get();
session2.send(new MessageOptions().setPrompt(&quot;Hello from session 2&quot;)).get();
</code></pre></section><section><a id="File_Attachments"></a>
<h3>File Attachments</h3>

<pre class="prettyprint"><code class="language-java">session.send(new MessageOptions()
    .setPrompt(&quot;Analyze this file&quot;)
    .setAttachments(List.of(
        new Attachment()
            .setType(&quot;file&quot;)
            .setPath(&quot;/path/to/file.java&quot;)
            .setDisplayName(&quot;My File&quot;)
    ))
).get();
</code></pre></section><section><a id="Bring_Your_Own_Key_.28BYOK.29"></a>
<h3>Bring Your Own Key (BYOK)</h3>
<p>Use a custom API provider:</p>

<pre class="prettyprint"><code class="language-java">var session = client.createSession(
    new SessionConfig()
        .setProvider(new ProviderConfig()
            .setType(&quot;openai&quot;)
            .setBaseUrl(&quot;https://api.openai.com/v1&quot;)
            .setApiKey(&quot;your-api-key&quot;))
).get();
</code></pre></section><section><a id="Permission_Handling"></a>
<h3>Permission Handling</h3>
<p>Handle permission requests from the CLI:</p>

<pre class="prettyprint"><code class="language-java">var session = client.createSession(
    new SessionConfig()
        .setModel(&quot;gpt-5&quot;)
        .setOnPermissionRequest((request, invocation) -&gt; {
            // Approve or deny the permission request
            var result = new PermissionRequestResult();
            result.setKind(&quot;user-approved&quot;);
            return CompletableFuture.completedFuture(result);
        })
).get();
</code></pre></section><section><a id="Infinite_Sessions"></a>
<h3>Infinite Sessions</h3>
<p>Infinite sessions enable automatic context management for long-running conversations. When enabled (default), the session automatically manages context window limits through background compaction and persists state to a workspace directory.</p><section><a id="How_It_Works"></a>
<h4>How It Works</h4>
<p>As conversations grow, they eventually approach the model's context window limit. Infinite sessions solve this by:</p>
<ol style="list-style-type: decimal;">

<li>
<p><strong>Background Compaction</strong>: When context utilization reaches the background threshold (default 80%), the session starts compacting older messages asynchronously while continuing to process new messages.</p></li>
<li>
<p><strong>Buffer Exhaustion Protection</strong>: If context reaches the exhaustion threshold (default 95%) before compaction completes, the session blocks until compaction finishes to prevent overflow.</p></li>
<li>
<p><strong>Workspace Persistence</strong>: Session state is persisted to a workspace directory containing:</p>
<ul>

<li><code>checkpoints/</code> - Session checkpoints for resumption</li>
<li><code>plan.md</code> - Current conversation plan</li>
<li><code>files/</code> - Associated files</li>
</ul></li>
</ol></section><section><a id="Configuration"></a>
<h4>Configuration</h4>

<pre class="prettyprint"><code class="language-java">var infiniteConfig = new InfiniteSessionConfig()
    .setEnabled(true)
    .setBackgroundCompactionThreshold(0.80)  // Start compacting at 80% utilization
    .setBufferExhaustionThreshold(0.95);     // Block at 95% until compaction completes

var session = client.createSession(
    new SessionConfig()
        .setModel(&quot;gpt-5&quot;)
        .setInfiniteSessions(infiniteConfig)
).get();
</code></pre></section><section><a id="Configuration_Options"></a>
<h4>Configuration Options</h4>
<table class="table table-striped">
<thead>
<tr class="a">
<th>Option</th>
<th>Default</th>
<th>Description</th></tr></thead><tbody>
<tr class="b">
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Whether infinite sessions are enabled</td></tr>
<tr class="a">
<td><code>backgroundCompactionThreshold</code></td>
<td><code>0.80</code></td>
<td>Context utilization (0.0-1.0) at which background compaction starts</td></tr>
<tr class="b">
<td><code>bufferExhaustionThreshold</code></td>
<td><code>0.95</code></td>
<td>Context utilization (0.0-1.0) at which the session blocks until compaction completes</td></tr></tbody>
</table>
</section><section><a id="Accessing_the_Workspace"></a>
<h4>Accessing the Workspace</h4>
<p>When infinite sessions are enabled, you can access the workspace path:</p>

<pre class="prettyprint"><code class="language-java">var session = client.createSession(
    new SessionConfig()
        .setModel(&quot;gpt-5&quot;)
        .setInfiniteSessions(new InfiniteSessionConfig().setEnabled(true))
).get();

String workspacePath = session.getWorkspacePath();
if (workspacePath != null) {
    System.out.println(&quot;Session workspace: &quot; + workspacePath);
    // Access checkpoints/, plan.md, files/ subdirectories
}
</code></pre></section><section><a id="Disabling_Infinite_Sessions"></a>
<h4>Disabling Infinite Sessions</h4>
<p>For short conversations where context management isn't needed:</p>

<pre class="prettyprint"><code class="language-java">var session = client.createSession(
    new SessionConfig()
        .setModel(&quot;gpt-5&quot;)
        .setInfiniteSessions(new InfiniteSessionConfig().setEnabled(false))
).get();

// session.getWorkspacePath() will return null
</code></pre></section></section><section><a id="MCP_Servers"></a>
<h3>MCP Servers</h3>
<p>The Copilot SDK can integrate with MCP servers (Model Context Protocol) to extend the assistant's capabilities with external tools. MCP servers run as separate processes and expose tools that Copilot can invoke during conversations.</p>
<p>&#x1f4d6; <strong><a href="mcp.html">Full MCP documentation &#x2192;</a></strong> - Learn about local vs remote servers, all configuration options, and troubleshooting.</p>
<p>Quick example:</p>

<pre class="prettyprint"><code class="language-java">Map&lt;String, Object&gt; filesystemServer = new HashMap&lt;&gt;();
filesystemServer.put(&quot;type&quot;, &quot;local&quot;);
filesystemServer.put(&quot;command&quot;, &quot;npx&quot;);
filesystemServer.put(&quot;args&quot;, List.of(&quot;-y&quot;, &quot;@modelcontextprotocol/server-filesystem&quot;, &quot;/tmp&quot;));
filesystemServer.put(&quot;tools&quot;, List.of(&quot;*&quot;));

var session = client.createSession(
    new SessionConfig()
        .setMcpServers(Map.of(&quot;filesystem&quot;, filesystemServer))
).get();
</code></pre></section></section><section><a id="Error_Handling"></a>
<h2>Error Handling</h2>

<pre class="prettyprint"><code class="language-java">try {
    var session = client.createSession().get();
    session.send(new MessageOptions().setPrompt(&quot;Hello&quot;)).get();
} catch (ExecutionException ex) {
    Throwable cause = ex.getCause();
    System.err.println(&quot;Error: &quot; + cause.getMessage());
}
</code></pre></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2026
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
